-- Mizzys Hub FULL GUI + Features (Compact Phone Style)
-- By Mizzy
-- Executor: Seliware / Synapse style

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local mouse = player:GetMouse()
local Camera = workspace.CurrentCamera

-- CONFIG
local CFG = {
    Aimbot = false,
    HoldKey = Enum.UserInputType.MouseButton2,
    FOV = 120,
    Smoothness = 0.15,
    ESP = true,
    Tracers = true,
    Crosshair = true,
    GUI_Lock = false
}

-- COLORS
local purple = Color3.fromRGB(160,32,240)
local black = Color3.fromRGB(20,20,20)
local gray = Color3.fromRGB(50,50,50)

-- SCREEN GUI
local ScreenGui = Instance.new("ScreenGui", player.PlayerGui)
ScreenGui.ResetOnSpawn = false

------------------------------------------------
-- MAIN GUI
------------------------------------------------
local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.fromOffset(360,600)
Main.Position = UDim2.fromScale(0.5,0.5)
Main.AnchorPoint = Vector2.new(0.5,0.5)
Main.BackgroundColor3 = black
Main.ClipsDescendants = true
Instance.new("UICorner", Main).CornerRadius = UDim.new(0,14)
local UIStroke = Instance.new("UIStroke", Main)
UIStroke.Color = purple
UIStroke.Thickness = 2
UIStroke.Transparency = 0.2

-- TOP BAR
local Top = Instance.new("Frame", Main)
Top.Size = UDim2.new(1,0,0,40)
Top.BackgroundColor3 = black
Instance.new("UICorner", Top).CornerRadius = UDim.new(0,14)

local Title = Instance.new("TextLabel", Top)
Title.Size = UDim2.new(1,0,1,0)
Title.BackgroundTransparency = 1
Title.Text = "Mizzys Hub"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextColor3 = purple

-- CLOSE & MINIMIZE
local CloseBtn = Instance.new("TextButton", Top)
CloseBtn.Size = UDim2.fromOffset(30,30)
CloseBtn.Position = UDim2.new(1,-35,0,5)
CloseBtn.BackgroundTransparency = 1
CloseBtn.Text = "X"
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextColor3 = Color3.fromRGB(255,80,80)
CloseBtn.TextSize = 16

local MinBtn = Instance.new("TextButton", Top)
MinBtn.Size = UDim2.fromOffset(30,30)
MinBtn.Position = UDim2.new(1,-70,0,5)
MinBtn.BackgroundTransparency = 1
MinBtn.Text = "_"
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextColor3 = purple
MinBtn.TextSize = 16

local minimized = false
local minBar
MinBtn.MouseButton1Click:Connect(function()
    if minimized then return end
    minimized = true
    Main.Visible = false
    minBar = Instance.new("Frame", ScreenGui)
    minBar.Size = UDim2.fromOffset(140,40)
    minBar.Position = UDim2.fromOffset(10,10)
    minBar.BackgroundColor3 = black
    Instance.new("UICorner", minBar).CornerRadius = UDim.new(0,8)
    local minText = Instance.new("TextButton", minBar)
    minText.Size = UDim2.fromScale(1,1)
    minText.BackgroundTransparency = 1
    minText.Text = "+ Mizzys Hub"
    minText.Font = Enum.Font.GothamBold
    minText.TextSize = 16
    minText.TextColor3 = purple
    minText.MouseButton1Click:Connect(function()
        minBar:Destroy()
        minimized = false
        Main.Visible = true
    end)
end)

CloseBtn.MouseButton1Click:Connect(function()
    Main:Destroy()
end)

-- DRAGGING
do
    local dragging, startInput, startPos
    Top.InputBegan:Connect(function(input)
        if input.UserInputType==Enum.UserInputType.MouseButton1 then
            dragging=true
            startInput=input.Position
            startPos=Main.Position
            input.Changed:Connect(function()
                if input.UserInputState==Enum.UserInputState.End then dragging=false end
            end)
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType==Enum.UserInputType.MouseMovement then
            local delta=input.Position-startInput
            Main.Position=startPos+UDim2.fromOffset(delta.X,delta.Y)
        end
    end)
end

------------------------------------------------
-- TABS
------------------------------------------------
local Tabs = {"Home","Player","Visuals","Misc","Settings"}
local Pages = {}

local TabBar = Instance.new("Frame", Main)
TabBar.Size = UDim2.new(1,0,0,40)
TabBar.Position = UDim2.new(0,0,0,40)
TabBar.BackgroundTransparency = 1

local Content = Instance.new("Frame", Main)
Content.Position = UDim2.new(0,0,0,80)
Content.Size = UDim2.new(1,0,1,-80)
Content.BackgroundTransparency = 1

local activeButton
local buttonWidth = 60
for i,name in ipairs(Tabs) do
    local page = Instance.new("Frame", Content)
    page.Size = UDim2.new(1,0,1,0)
    page.BackgroundTransparency = 1
    page.Visible=false
    Pages[name] = page

    local b = Instance.new("TextButton", TabBar)
    b.Size = UDim2.fromOffset(buttonWidth,36)
    b.Position = UDim2.fromOffset((i-1)*(buttonWidth+4)+10,2)
    b.Text = name
    b.Font = Enum.Font.GothamSemibold
    b.TextSize = 14
    b.BackgroundColor3 = gray
    b.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", b).CornerRadius = UDim.new(0,8)

    b.MouseEnter:Connect(function()
        TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = purple, TextSize = 16}):Play()
    end)
    b.MouseLeave:Connect(function()
        if activeButton ~= b then
            TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = gray, TextSize = 14}):Play()
        end
    end)
    b.MouseButton1Click:Connect(function()
        for _,p in pairs(Pages) do p.Visible=false end
        Pages[name].Visible=true
        if activeButton then
            TweenService:Create(activeButton, TweenInfo.new(0.2), {BackgroundColor3 = gray, TextSize = 14}):Play()
        end
        TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = purple, TextSize = 16}):Play()
        activeButton=b
    end)
end
Pages.Home.Visible = true

------------------------------------------------
-- BUTTON & SLIDER HELPERS
------------------------------------------------
local function Button(parent,text,y,callback)
    local b = Instance.new("TextButton")
    b.Size = UDim2.fromOffset(180,36)
    b.Position = UDim2.fromOffset(20,y)
    b.Text = text
    b.Font = Enum.Font.GothamSemibold
    b.TextSize = 14
    b.BackgroundColor3 = gray
    b.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner",b).CornerRadius = UDim.new(0,10)
    b.Parent = parent
    b.MouseButton1Click:Connect(callback)
    return b
end

local function Slider(parent,label,min,max,default,callback,y)
    local L = Instance.new("TextLabel")
    L.Size = UDim2.fromOffset(200,20)
    L.Position = UDim2.fromOffset(20,y)
    L.Text = label.." : "..default
    L.TextColor3 = Color3.new(1,1,1)
    L.BackgroundTransparency = 1
    L.Font = Enum.Font.Gotham
    L.TextSize = 14
    L.Parent = parent

    local S = Instance.new("TextBox")
    S.Size = UDim2.fromOffset(160,20)
    S.Position = UDim2.fromOffset(20,y+20)
    S.Text = tostring(default)
    S.ClearTextOnFocus = false
    S.Parent = parent

    S.FocusLost:Connect(function()
        local val = tonumber(S.Text)
        if val then
            callback(val)
            L.Text = label.." : "..val
        else
            S.Text = tostring(default)
        end
    end)
end

------------------------------------------------
-- HOME TAB
------------------------------------------------
local HomeInfo = Instance.new("TextLabel", Pages.Home)
HomeInfo.Size = UDim2.new(1, -40, 0, 100)
HomeInfo.Position = UDim2.fromOffset(20, 20)
HomeInfo.BackgroundTransparency = 1
HomeInfo.TextWrapped = true
HomeInfo.Text = "Made by Mizzy\nVersion 1.2\nLast Updated: 02/03/2026"
HomeInfo.Font = Enum.Font.GothamSemibold
HomeInfo.TextSize = 16
HomeInfo.TextColor3 = purple
HomeInfo.TextXAlignment = Enum.TextXAlignment.Left
HomeInfo.TextYAlignment = Enum.TextYAlignment.Top

------------------------------------------------
-- PLAYER TAB
------------------------------------------------
do
    local y=20
    local AimbotBtn
    Button(Pages.Player,"Jump",y,function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/mizzysleaksources/mizzys-jump/refs/heads/main/mizzys%20jumpo"))()
    end)
    y=y+50
    Button(Pages.Player,"Mizzys TP",y,function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/mizzysleaksources/mizzys-tp/refs/heads/main/mizzys%20tp%20script"))()
    end)
    y=y+50
    AimbotBtn = Button(Pages.Player,"Aimbot : OFF",y,function()
        CFG.Aimbot = not CFG.Aimbot
        AimbotBtn.Text = "Aimbot : "..(CFG.Aimbot and "ON" or "OFF")
    end)
    y=y+50
    Button(Pages.Player,"Tall Like Mizzy",y,function()
        local char=player.Character
        if not char then return end
        local h=char:FindFirstChildOfClass("Humanoid")
        if not h then return end
        h.HipHeight=h.HipHeight==10 and 20 or 10
    end)
    y=y+50
    Button(Pages.Player,"Miz Speed",y,function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/mizzysleaksources/mizzys-speed-/refs/heads/main/BIG%20MIZ%20SPEED"))()
    end)
end

------------------------------------------------
-- VISUALS TAB
------------------------------------------------
do
    local y=20
    Button(Pages.Visuals,"ESP Toggle",y,function() CFG.ESP = not CFG.ESP end)
    y=y+50
    Button(Pages.Visuals,"Tracers Toggle",y,function() CFG.Tracers = not CFG.Tracers end)
    y=y+50
    Button(Pages.Visuals,"Crosshair",y,function() CFG.Crosshair = not CFG.Crosshair end)
end

------------------------------------------------
-- MISC TAB
------------------------------------------------
do
    local y=20
    Button(Pages.Misc,"Spin",y,function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/mizzysleaksources/mizzys-spin/refs/heads/main/SPINNY"))()
end)
    y=y+50
    Button(Pages.Misc,"Fly",y,function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/mizzysleaksources/mizzys-fly-/refs/heads/main/fly%20lol"))()
    end)
    y=y+50
    Button(Pages.Misc,"BigHead",y,function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/mizzysleaksources/mizzys-big-head-script/refs/heads/main/big%20head"))()
end)
    y=y+50
    Button(Pages.Misc,"anti knockback",y,function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/mizzysleaksources/Mizzys-anti-ragdoll/refs/heads/main/hub"))()
    end)
end

------------------------------------------------
-- SETTINGS TAB
------------------------------------------------
do
    local y=20
    Slider(Pages.Settings,"Aimbot FOV",10,360,CFG.FOV,function(v) CFG.FOV=v; FOVCircle.Size=UDim2.fromOffset(v*2,v*2) end,y)
    y=y+50
    Slider(Pages.Settings,"Smoothness",0,1,CFG.Smoothness,function(v) CFG.Smoothness=v; AIM_SMOOTHNESS=v end,y)
    y=y+50
    Button(Pages.Settings,"Lock GUI",y,function() CFG.GUI_Lock = not CFG.GUI_Lock end)
end

------------------------------------------------
-- PURPLE ESP LOGIC WITH CLEANUP
------------------------------------------------
local ESP_Boxes = {}
local ESP_Tracers = {}
local ESP_Names = {}

Players.PlayerRemoving:Connect(function(plr)
    if ESP_Boxes[plr] then ESP_Boxes[plr]:Remove(); ESP_Boxes[plr]=nil end
    if ESP_Tracers[plr] then ESP_Tracers[plr]:Remove(); ESP_Tracers[plr]=nil end
    if ESP_Names[plr] then ESP_Names[plr]:Remove(); ESP_Names[plr]=nil end
end)

RunService.RenderStepped:Connect(function()
    for _,plr in pairs(Players:GetPlayers()) do
        if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local root = plr.Character.HumanoidRootPart
            local head = plr.Character:FindFirstChild("Head")
            local screenPos, onScreen = Camera:WorldToViewportPoint(root.Position)
            
            if CFG.ESP and onScreen then
                if not ESP_Boxes[plr] then
                    local box = Drawing.new("Square")
                    box.Thickness = 2
                    box.Filled = false
                    box.Color = purple
                    ESP_Boxes[plr] = box
                end
                local box = ESP_Boxes[plr]
                box.Size = Vector2.new(40,40)
                box.Position = Vector2.new(screenPos.X-20, screenPos.Y-20)
                box.Visible = true

                if CFG.Tracers then
                    if not ESP_Tracers[plr] then
                        local tracer = Drawing.new("Line")
                        tracer.Thickness = 1
                        tracer.Color = purple
                        ESP_Tracers[plr] = tracer
                    end
                    local tracer = ESP_Tracers[plr]
                    tracer.From = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y)
                    tracer.To = Vector2.new(screenPos.X, screenPos.Y)
                    tracer.Visible = true
                end

                if head then
                    if not ESP_Names[plr] then
                        local nameTag = Drawing.new("Text")
                        nameTag.Center = true
                        nameTag.Size = 16
                        nameTag.Color = Color3.new(1,1,1)
                        ESP_Names[plr] = nameTag
                    end
                    local nameTag = ESP_Names[plr]
                    nameTag.Text = plr.Name
                    nameTag.Position = Vector2.new(screenPos.X, screenPos.Y-25)
                    nameTag.Visible = true
                end
            else
                if ESP_Boxes[plr] then ESP_Boxes[plr].Visible = false end
                if ESP_Tracers[plr] then ESP_Tracers[plr].Visible = false end
                if ESP_Names[plr] then ESP_Names[plr].Visible = false end
            end
        end
    end
end)

------------------------------------------------
-- AIM ASSIST / TRAINING SYSTEM
------------------------------------------------
local AIM_ENABLED = false
local AIM_SMOOTHNESS = CFG.Smoothness
local AIM_FOV_RADIUS = CFG.FOV

-- FOV Circle already defined as FOVCircle and uses purple color

-- GET CLOSEST TARGET
local function getClosestTarget()
	local closest = nil
	local shortestDistance = AIM_FOV_RADIUS

	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character then
			local humanoid = plr.Character:FindFirstChild("Humanoid")
			local root = plr.Character:FindFirstChild("HumanoidRootPart")

			if humanoid and humanoid.Health > 0 and root then
				local screenPos, onScreen = Camera:WorldToViewportPoint(root.Position)

				if onScreen then
					local dist = (Vector2.new(screenPos.X, screenPos.Y) -
						Vector2.new(mouse.X, mouse.Y)).Magnitude

					if dist < shortestDistance then
						shortestDistance = dist
						closest = root
					end
				end
			end
		end
	end

	return closest
end

-- INPUT TOGGLE
UserInputService.InputBegan:Connect(function(input)
	if input.UserInputType == CFG.HoldKey then
		AIM_ENABLED = true
	end
end)

UserInputService.InputEnded:Connect(function(input)
	if input.UserInputType == CFG.HoldKey then
		AIM_ENABLED = false
	end
end)

-- AIM LOOP
RunService.RenderStepped:Connect(function()
	if not CFG.Aimbot or not AIM_ENABLED then return end

	local target = getClosestTarget()
	if target then
		local camPos = Camera.CFrame.Position
		local lookAt = target.Position
		local newCFrame = Camera.CFrame:Lerp(
			CFrame.new(camPos, lookAt),
			AIM_SMOOTHNESS
		)
		Camera.CFrame = newCFrame
	end
end)
